<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="pageTitle">Admin Recetas El Truco</title>
    <!-- FAVICON -->
    <link rel="icon" href="../img/favicon.ico" type="image/x-icon">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.css">
    <!-- Styles CSS -->
    <link rel="stylesheet" href="../css/style.css" />    
    <link rel="stylesheet" href="./admin.css" />    
  </head>
  <body>
    <!--NavBar-->
    <div class="navbar-container sticky-top py-3">
      <nav class="navbar navbar-expand-lg navbar-dark navbar-farm px-4">
        <a class="navbar-brand" href="admin-dashboard.html">
          <img src="../img/LogoB.svg" alt="Logo de El Truco" class="navbar-logo">
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav navbar-nav-absolute-centered">
            <li class="nav-item">
              <a class="nav-link" href="admin-dashboard.html">Inicio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="manageProducts">Productos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="admin-recipes.html">Recetas</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="Newsletter">Noticias</a>
            </li>
            <li class="nav-item d-lg-none">
              <a class="nav-link" href="#">Usuario</a>
            </li>
          </ul>
          
          <div class="d-none d-lg-flex align-items-center ms-auto">
            <a href="#" id="logoutButton" class="me-3 navbar-icon" aria-label="Cerrar sesión">
                <i class="bi bi-box-arrow-right fs-5"></i>
            </a>
          </div>
        </div>
      </nav>
    </div>
    <!--END NavBar-->

    <!-- Formulario -->
    <div class="container my-5">
        <h1 class="mb-4">Nueva Receta</h1>

        <div id="notificationContainer" class="mb-3"></div>

        <form id="recipeForm" novalidate>
            <div class="row g-4">
            
                <div class="col-md-6">
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="recipeName" name="name" placeholder="Nombre de la Receta" required>
                        <label for="recipeName">Nombre de la Receta</label>
                        <div class="invalid-feedback">
                            El nombre de la receta es necesario, agrega uno por favor.
                        </div>
                    </div>

                    <div class="form-floating mb-3">
                        <textarea class="form-control" id="shortDescription" name="shortDescription" placeholder="Descripción corta" style="height: 100px" required minlength="10"></textarea>
                        <label for="shortDescription">Descripción corta</label>
                        <div class="invalid-feedback">
                            La descripción corta no puede estar vacía (mínimo 10 caracteres).
                        </div>
                    </div>

                    <div class="form-floating mb-3">
                        <textarea class="form-control" id="fullDescription" name="fullDescription" placeholder="Descripción completa" style="height: 160px" required minlength="10"></textarea>
                        <label for="fullDescription">Descripción completa</label>
                        <div class="invalid-feedback">
                            La descripción no puede estar vacía (mínimo 10 caracteres).
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-floating mb-3">
                        <select class="form-select" id="recipeCategory" name="category" aria-label="Categoría de la receta" required>
                            <option value="" selected disabled>Selecciona una categoría</option>
                            <option value="breakfast">Desayuno</option>
                            <option value="lunch">Almuerzo</option>
                            <option value="dinner">Cena</option>
                            <option value="dessert">Postre</option>
                            <option value="dip">Salsas / Aderesos</option>
                            <option value="drink">Bebida</option>
                        </select>
                        <label for="recipeCategory">Categoría</label>
                        <div class="invalid-feedback">
                            Por favor, selecciona una categoría.
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="imageFile" class="form-label">Imagen de la Receta</label>
                        <input class="form-control" type="file" id="imageFile" name="imageFile" accept="image/webp, image/jpeg, image/png" required>
                        <div class="invalid-feedback">
                            Por favor, agrega una imagen para tu receta.
                        </div>
                    </div>

                    <div class="text-center">
                        <img id="imagePreview" src="https://placehold.co/300x200/b2b2b2/ffffff?text=Vista+Previa" alt="Vista previa de la imagen" class="img-fluid rounded" style="max-height: 250px; display: block; margin: 0 auto;">
                    </div>
                </div>

                <div class="col-12">
                    <fieldset class="border p-3 rounded">
                        <legend class="float-none w-auto px-3 h5">Ingredientes</legend>
                        <div id="ingredientList" class="mb-3">
                            
                            <div class="dynamic-field-wrapper mb-2">
                                <div class="input-group">
                                    <input type="text" class="form-control" name="ingredientText" placeholder="Ej: 2 Huevos orgánicos" aria-label="Ingrediente" required maxlength="255">
                                    <div class="invalid-feedback">
                                        El ingrediente no puede estar vacío.
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        <button id="addIngredient" type="button" class="btn btn-info btn-sm">
                            + Agregar Ingrediente
                        </button>
                    </fieldset>
                </div>

                <div class="col-12">
                    <fieldset class="border p-3 rounded">
                        <legend class="float-none w-auto px-3 h5">Pasos de Preparación</legend>
                        <div id="stepList" class="mb-3">

                            <div class="dynamic-field-wrapper mb-2">
                                <div class="input-group">
                                    <textarea class="form-control" name="instruction" placeholder="Ej: Rompe los huevos en un tazón..." aria-label="Instrucción del paso" rows="2" required></textarea>
                                    <div class="invalid-feedback">
                                        La instrucción del paso no puede estar vacía.
                                    </div>
                                </div>
                            </div>

                        </div>
                        <button id="addStep" type="button" class="btn btn-info btn-sm">
                            + Agregar Paso
                        </button>
                    </fieldset>
                </div>

                <div class="col-12 text-end mt-4">
                    <button type="submit" class="btn btn-verde btn-lg">Guardar Receta</button>
                </div>
            </div>
        </form>

    </div>
    <!-- Formulario Fin -->

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <!-- Main JS -->
    <script type="module" src="../js/main.js"></script>
    <script src="./js/admin-recipe-create.js" type="module"></script>
  </body>
</html>
